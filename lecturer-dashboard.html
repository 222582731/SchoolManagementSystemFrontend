<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lecturer Dashboard - SchoolMS</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: #fff;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      border-radius: 10px;
      overflow: hidden;
    }

    table th, table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    table th {
      background-color: #2c3e50;
      color: white;
    }

    table tr:hover {
      background-color: #f1f1f1;
    }

    .action-btn {
      padding: 5px 10px;
      margin-right: 5px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .edit-btn { background-color: #1abc9c; color: #fff; }
    .save-btn { background-color: #16a085; color: #fff; }
    .delete-btn { background-color: #e74c3c; color: #fff; }

    #addStudentBtn {
      margin-bottom: 15px;
    }

    input[type="number"] {
      width: 60px;
    }
  </style>
</head>
<body>
<header>
  <div class="logo">
    <img src="image/school-management-system-logo.png" alt="School Logo" class="logo-img">
  </div>
  <nav>
    <ul>
      <li><a href="home.html">Home</a></li>
      <li><a href="#" id="logoutBtn">Logout</a></li>
    </ul>
  </nav>
</header>

<div class="dashboard-container">
  <h1>Welcome, <span id="userName"></span>!</h1>
  <p>This is your lecturer dashboard.</p>

  <h2>Manage Students</h2>
  <button id="addStudentBtn" class="btn">Add New Student</button>
  
  <table id="studentTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Student Number</th>
        <th>Grade</th>
        <th>Attendance %</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const currentUser = JSON.parse(localStorage.getItem('currentUser'));

if (!currentUser || currentUser.userType !== "LECTURER") {
  window.location.href = "login.html";
} else {
  document.getElementById('userName').textContent = currentUser.name;
}

// 20 Mock students
let students = [
  { id: 1, name: "John Van Wyk", studentNumber: "22305", grade: 75, attendance: 90 },
  { id: 2, name: "Jane Smith", studentNumber: "22192", grade: 88, attendance: 95 },
  { id: 3, name: "Anda Bokwana", studentNumber: "22286", grade: 65, attendance: 80 },
  { id: 4, name: "Lazola Phiri", studentNumber: "22291", grade: 92, attendance: 98 },
  { id: 5, name: "Chimanga Mutambara", studentNumber: "22183", grade: 70, attendance: 85 },
  { id: 6, name: "Lihle Ari", studentNumber: "22281", grade: 81, attendance: 90 },
  { id: 7, name: "David Lee", studentNumber: "22293", grade: 74, attendance: 88 },
  { id: 8, name: "Chantell Van De Linda", studentNumber: "22645", grade: 89, attendance: 92 },
  { id: 9, name: "Daniel Martinez", studentNumber: "22352", grade: 77, attendance: 85 },
  { id: 10, name: "Ayabonga Khumalo", studentNumber: "22901", grade: 91, attendance: 96 }
  
 
];

function renderStudents() {
  const tbody = document.querySelector('#studentTable tbody');
  tbody.innerHTML = '';

  students.forEach(student => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${student.name}</td>
      <td>${student.studentNumber}</td>
      <td><span class="grade">${student.grade}</span></td>
      <td><span class="attendance">${student.attendance}</span></td>
      <td>
        <button class="edit-btn action-btn">Edit</button>
        <button class="save-btn action-btn" style="display:none;">Save</button>
        <button class="delete-btn action-btn">Delete</button>
      </td>
    `;

    const editBtn = tr.querySelector('.edit-btn');
    const saveBtn = tr.querySelector('.save-btn');
    const deleteBtn = tr.querySelector('.delete-btn');
    const gradeSpan = tr.querySelector('.grade');
    const attendanceSpan = tr.querySelector('.attendance');

    editBtn.addEventListener('click', () => {
      gradeSpan.innerHTML = `<input type="number" value="${student.grade}">`;
      attendanceSpan.innerHTML = `<input type="number" value="${student.attendance}">`;
      editBtn.style.display = 'none';
      saveBtn.style.display = 'inline-block';
    });

    saveBtn.addEventListener('click', () => {
      const newGrade = tr.querySelector('input[type="number"]').value;
      const newAttendance = tr.querySelectorAll('input[type="number"]')[1].value;
      student.grade = Number(newGrade);
      student.attendance = Number(newAttendance);
      renderStudents();
    });

    deleteBtn.addEventListener('click', () => {
      if (confirm(`Are you sure you want to remove ${student.name}?`)) {
        students = students.filter(s => s.id !== student.id);
        renderStudents();
      }
    });

    tbody.appendChild(tr);
  });
}

// Add new student button
document.getElementById('addStudentBtn').addEventListener('click', () => {
  const name = prompt("Enter student name:");
  const studentNumber = prompt("Enter student number:");
  const grade = prompt("Enter initial grade:");
  const attendance = prompt("Enter initial attendance %");

  if (name && studentNumber) {
    const newStudent = {
      id: Date.now(),
      name,
      studentNumber,
      grade: Number(grade) || 0,
      attendance: Number(attendance) || 0
    };
    students.push(newStudent);
    renderStudents();
  }
});

// Logout functionality
document.getElementById('logoutBtn').addEventListener('click', () => {
  localStorage.removeItem('currentUser');
  window.location.href = "login.html";
});

// Initial render
renderStudents();
</script>
</body>
</html>
